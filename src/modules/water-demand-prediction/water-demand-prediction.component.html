<div
  class="is-fullheight is-fullwidth"
  style="overflow-y: visible; overflow-x: hidden"
>
  <div class="columns">
    <!--Real Data Graph and Buttons-->
    <div class="column">
      <div class="box" style="height: 90vh">
        <div class="level">
          <div class="level-left">
            <div class="is-justify-content-start">
              <!-- reset button -->
              <button
                class="button is-primary is-rounded"
                (click)="resetChart()"
              >
                {{ "water-demand-prediction.delete.normal" | translate }}
              </button>
            </div>
          </div>
          <div class="level-right">
            <!-- Resolution Switches -->
            <div class="buttons has-addons is-justify-content-end">
              <button
                class="button"
                [class.is-active]="displayedResolution() === 'hourly'"
                (click)="
                  setDisplayedResolution('hourly');
                  showDatasets('hourly');
                  showPredictedDatasets('hourly')
                "
              >
                {{ optionsResolution["hourly"] | translate }}
              </button>
              <button
                class="button"
                [class.is-active]="displayedResolution() === 'daily'"
                (click)="
                  setDisplayedResolution('daily');
                  showDatasets('daily');
                  showPredictedDatasets('daily')
                "
              >
                {{ optionsResolution["daily"] | translate }}
              </button>
              <button
                class="button"
                [class.is-active]="displayedResolution() === 'weekly'"
                (click)="
                  setDisplayedResolution('weekly');
                  showDatasets('weekly');
                  showPredictedDatasets('weekly')
                "
              >
                {{ optionsResolution["weekly"] | translate }}
              </button>
              <button
                class="button is-rounded"
                [class.is-active]="chartType() === 'line'"
                (click)="switchDisplayedChartType()"
              >
                {{
                  "water-demand-prediction.graph.mode." + chartType()
                    | translate
                }}
              </button>
            </div>
          </div>
        </div>
        <div class="is-flex is-flex-direction-column is-align-items-center">
          <!-- graph real data container box -->
          <div class="is-fullwidth" style="height: 60vh">
            <canvas
              baseChart
              [data]="chartDataCurrentValues"
              [options]="chartOptions"
              [type]="chartType()"
            ></canvas>
          </div>
          <!--buttons for showing and training -->
          <div class="is-fullwidth">
            <div class="buttons is-justify-content-space-around">
              <button
                class="button is-primary is-rounded"
                (click)="fetchDataSmartmeter()"
              >
                {{ "water-demand-prediction.request.realdata" | translate }}
              </button>
              <button
                class="button is-primary is-rounded"
                (click)="trainModel()"
              >
                {{ "water-demand-prediction.request.trainModel" | translate }}
              </button>
            </div>
            <!-- drop down menus-->
            <div class="buttons is-justify-content-space-around">
              <dropdown
                [menuName]="menuResolution"
                [options]="optionsResolution"
                [changeMenuName]="true"
                kind="hover"
                buttonSize="200px"
                [(choice)]="choiceResolution"
              ></dropdown>
              <dropdown
                [menuName]="menuTime"
                [options]="optionsTime"
                [changeMenuName]="true"
                kind="hover"
                buttonSize="200px"
                [(choice)]="choiceTime"
              ></dropdown>
              <dropdown
                [menuName]="menuSmartmeter"
                [options]="optionsSmartmeter"
                [changeMenuName]="true"
                kind="hover"
                buttonSize="200px"
                [(choice)]="choiceSmartmeter"
              ></dropdown>
              <dropdown
                [menuName]="menuStartPoint"
                [options]="optionsStartPoint"
                [changeMenuName]="true"
                kind="hover"
                buttonSize="200px"
                [(choice)]="choiceStartPoint"
              ></dropdown>
              <dropdown
                [menuName]="menuWeather"
                [options]="optionsWeather"
                [changeMenuName]="true"
                kind="hover"
                buttonSize="200px"
                [(choice)]="choiceWeather"
              ></dropdown>
              <dropdown
                [menuName]="menuWeatherColumn"
                [options]="optionsWeatherColumn"
                [changeMenuName]="true"
                kind="hover"
                buttonSize="200px"
                [(choice)]="choiceWeatherColumn"
              ></dropdown>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!--Predicted Data Graph and Buttons-->
    <div class="column">
      <div class="box" style="height: 90vh">
        <div class="level">
          <div class="level-left">
            <div class="is-justify-content-start">
              <!-- reset button -->
              <button
                class="button is-primary is-rounded"
                (click)="resetPredictionChart()"
              >
                {{ "water-demand-prediction.delete.predicted" | translate }}
              </button>
            </div>
          </div>
        </div>
        <div class="is-fullwidth" style="height: 60vh">
          <canvas
            baseChart
            [data]="chartDataPredictedValues"
            [options]="chartOptions"
            [type]="chartType()"
          ></canvas>
        </div>
        <div class="buttons is-justify-content-space-around">
          <!-- buttons for prediction values -->
          <button
            class="button is-primary is-rounded"
            (click)="fetchPredDataSmartmeter()"
          >
            {{ "water-demand-prediction.request.preddata" | translate }}
          </button>
        </div>
        <!-- Analysis metrics -->
        <div>
          <table class="table is-fullwidth">
            <thead>
              <th
                title="{{
                  'water-demand-prediction.explanation.MAE' | translate
                }}"
              >
                {{ "water-demand-prediction.metrics.MAE" | translate }}
              </th>
              <th
                title="{{
                  'water-demand-prediction.explanation.MSE' | translate
                }}"
              >
                {{ "water-demand-prediction.metrics.MSE" | translate }}
              </th>
              <th
                title="{{
                  'water-demand-prediction.explanation.RMSE' | translate
                }}"
              >
                {{ "water-demand-prediction.metrics.RMSE" | translate }}
              </th>
              <th
                title="{{
                  'water-demand-prediction.explanation.R2' | translate
                }}"
              >
                {{ "water-demand-prediction.metrics.R2" | translate }}
              </th>
            </thead>
            <tbody>
              <tr *ngIf="currentPredictedSmartmeterData">
                <td
                  title="{{ currentPredictedSmartmeterData.meanAbsoluteError }}"
                >
                  {{
                    currentPredictedSmartmeterData!.meanAbsoluteError * 100
                      | number: "1.2-2"
                  }}%
                </td>
                <td
                  title="{{ currentPredictedSmartmeterData.meanSquaredError }}"
                >
                  {{
                    currentPredictedSmartmeterData!.meanSquaredError * 100
                      | number: "1.2-2"
                  }}%
                </td>
                <td
                  title="{{
                    currentPredictedSmartmeterData.rootOfmeanSquaredError
                  }}"
                >
                  {{
                    currentPredictedSmartmeterData!.rootOfmeanSquaredError * 100
                      | number: "1.2-2"
                  }}%
                </td>
                <td title="{{ currentPredictedSmartmeterData.r2 }}">
                  {{
                    currentPredictedSmartmeterData.r2 * 100 | number: "1.2-2"
                  }}%
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>
