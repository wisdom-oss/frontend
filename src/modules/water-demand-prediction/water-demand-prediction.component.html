<div class="columns is-multiline">
  <!--Real Data Graph and Buttons-->
  <div class="column is-full-tablet is-half-desktop">
    <div class="box is-fullheight">
      <!-- reset button -->
      <button
        class="button is-primary is-rounded is-responsive"
        (click)="resetChart()"
      >
        {{ "water-demand-prediction.delete.normal" | translate }}
      </button>
      <!-- Resolution Switches -->
      <div
        class="buttons has-addons are-small is-flex is-justify-content-flex-end"
      >
        <button
          class="button is-responsive"
          [class.is-active]="displayedResolution() === 'hourly'"
          (click)="
            setDisplayedResolution('hourly');
            showDatasets('hourly');
            showPredictedDatasets('hourly')
          "
        >
          {{ optionsResolution["hourly"] | translate }}
        </button>
        <button
          class="button is-responsive"
          [class.is-active]="displayedResolution() === 'daily'"
          (click)="
            setDisplayedResolution('daily');
            showDatasets('daily');
            showPredictedDatasets('daily')
          "
        >
          {{ optionsResolution["daily"] | translate }}
        </button>
        <button
          class="button is-responsive"
          [class.is-active]="displayedResolution() === 'weekly'"
          (click)="
            setDisplayedResolution('weekly');
            showDatasets('weekly');
            showPredictedDatasets('weekly')
          "
        >
          {{ optionsResolution["weekly"] | translate }}
        </button>
        <button
          class="button is-rounded is-responsive"
          [class.is-active]="chartType() === 'line'"
          (click)="switchDisplayedChartType()"
        >
          {{ "water-demand-prediction.graph.mode." + chartType() | translate }}
        </button>
      </div>
      <div class="">
        <!-- graph real data container box -->
        <div class="" style="height: 40vh">
          <canvas
            baseChart
            [data]="chartDataCurrentValues"
            [options]="chartOptions"
            [type]="chartType()"
          ></canvas>
        </div>
        <!--buttons for showing and training -->
        <div class="">
          <div class="buttons">
            <button
              class="button is-primary is-rounded is-responsive"
              (click)="fetchDataSmartmeter()"
            >
              {{ "water-demand-prediction.request.realdata" | translate }}
            </button>
            <button
              class="button is-primary is-rounded is-responsive"
              (click)="trainModel()"
            >
              {{ "water-demand-prediction.request.trainModel" | translate }}
            </button>
          </div>
          <!-- drop down menus-->
          <div class="buttons">
            <dropdown
              [menuName]="menuResolution"
              [options]="optionsResolution"
              [changeMenuName]="true"
              kind="hover"
              [(choice)]="choiceResolution"
            ></dropdown>
            <dropdown
              [menuName]="menuTime"
              [options]="optionsTime"
              [changeMenuName]="true"
              kind="hover"
              [(choice)]="choiceTime"
            ></dropdown>
            <dropdown
              [menuName]="menuSmartmeter"
              [options]="optionsSmartmeter"
              [changeMenuName]="true"
              kind="hover"
              [(choice)]="choiceSmartmeter"
            ></dropdown>
            <dropdown
              [menuName]="menuStartPoint"
              [options]="optionsStartPoint"
              [changeMenuName]="true"
              kind="hover"
              [(choice)]="choiceStartPoint"
            ></dropdown>
            <dropdown
              [menuName]="menuWeather"
              [options]="optionsWeather"
              [changeMenuName]="true"
              kind="hover"
              [(choice)]="choiceWeather"
            ></dropdown>
            <dropdown
              [menuName]="menuWeatherColumn"
              [options]="optionsWeatherColumn"
              [changeMenuName]="true"
              kind="hover"
              [(choice)]="choiceWeatherColumn"
            ></dropdown>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!--Predicted Data Graph and Buttons-->
  <div class="column is-full-tablet is-half-desktop">
    <div class="box is-fullheight">
      <!-- reset button -->
      <button
        class="button is-primary is-rounded is-responsive mb-6"
        (click)="resetPredictionChart()"
      >
        {{ "water-demand-prediction.delete.predicted" | translate }}
      </button>
      <div class="" style="height: 40vh">
        <canvas
          baseChart
          [data]="chartDataPredictedValues"
          [options]="chartOptions"
          [type]="chartType()"
        ></canvas>
      </div>
      <div class="buttons">
        <!-- buttons for prediction values -->
        <button
          class="button is-primary is-rounded is-responsive"
          (click)="fetchPredData()"
        >
          {{ "water-demand-prediction.request.preddata" | translate }}
        </button>
        <button
          class="button is-primary is-rounded is-responsive"
          (click)="showPredData()"
        >
          {{ "water-demand-prediction.request.showdata" | translate }}
        </button>
      </div>
      <!-- Analysis metrics -->
      <div>
        <table class="table">
          <thead>
            <th
              title="{{
                'water-demand-prediction.explanation.MAE' | translate
              }}"
            >
              {{ "water-demand-prediction.metrics.MAE" | translate }}
            </th>
            <th
              title="{{
                'water-demand-prediction.explanation.MSE' | translate
              }}"
            >
              {{ "water-demand-prediction.metrics.MSE" | translate }}
            </th>
            <th
              title="{{
                'water-demand-prediction.explanation.RMSE' | translate
              }}"
            >
              {{ "water-demand-prediction.metrics.RMSE" | translate }}
            </th>
            <th
              title="{{ 'water-demand-prediction.explanation.R2' | translate }}"
            >
              {{ "water-demand-prediction.metrics.R2" | translate }}
            </th>
          </thead>
          <tbody>
            <tr *ngIf="currentPredictedSmartmeterData">
              <td
                title="{{ currentPredictedSmartmeterData.meanAbsoluteError }}"
              >
                {{
                  currentPredictedSmartmeterData!.meanAbsoluteError * 100
                    | number: "1.2-2"
                }}%
              </td>
              <td title="{{ currentPredictedSmartmeterData.meanSquaredError }}">
                {{
                  currentPredictedSmartmeterData!.meanSquaredError * 100
                    | number: "1.2-2"
                }}%
              </td>
              <td
                title="{{
                  currentPredictedSmartmeterData.rootOfmeanSquaredError
                }}"
              >
                {{
                  currentPredictedSmartmeterData!.rootOfmeanSquaredError * 100
                    | number: "1.2-2"
                }}%
              </td>
              <td title="{{ currentPredictedSmartmeterData.r2 }}">
                {{ currentPredictedSmartmeterData.r2 * 100 | number: "1.2-2" }}%
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
